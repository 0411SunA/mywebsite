{
  "hash": "42f5234ebeaa2eece0dc2c2e95952e0e",
  "result": {
    "engine": "jupyter",
    "markdown": "---\ntitle: LS 빅데이터 스쿨 homework 5.\nauthor: 백선아\ndate: '2024-07-31'\ncategories:\n  - bigdata\n---\n\n# 챕터 9-2 설문조사 그래프에서 각 성별 95% 신뢰구간 계산후 그리기\n## norm.ppf() 사용해서 그릴 것. 모분산은 표본 분산을 사용해서 추정\n## 위 아래 수직 막대기로 표시 (아래 그림 참조)\n\n::: {#739309de .cell execution_count=1}\n``` {.python .cell-code}\n# ! pip install pyreadstat\nimport pandas as pd\nimport numpy as np\nimport seaborn as sns\nfrom scipy.stats import norm\nimport matplotlib.pyplot as plt \n\n# 데이터 불러오기 \nraw_welfare = pd.read_spss(\"C:/Users/USER/Documents/LS빅데이터스쿨/mywebsite/data/koweps/Koweps_hpwc14_2019_beta2.sav\")\nraw_welfare\n\n# 복사본 만들기\nwelfare = raw_welfare.copy()\n\nwelfare=welfare.rename(\n    columns = {\n        \"h14_g3\" : \"sex\",\n        \"h14_g4\" : \"birth\",\n        \"h14_g10\" : \"marriage_type\",\n        \"h14_g11\" : \"religion\",\n        \"p1402_8aq1\" : \"income\",\n        \"h14_eco9\" : \"code_job\",\n        \"h14_reg7\" : \"code_region\"\n    }\n)\nwelfare = welfare[[\"sex\", \"birth\", \"marriage_type\",\n                    \"religion\", \"income\", \"code_job\", \"code_region\"]]\n\nwelfare[\"sex\"] = np.where(welfare[\"sex\"] == 1, \n                           \"male\", \"female\")\n\nwelfare[\"sex\"].value_counts()\n\n```\n\n::: {.cell-output .cell-output-display execution_count=1}\n```\nsex\nfemale    7913\nmale      6505\nName: count, dtype: int64\n```\n:::\n:::\n\n\n## 성별에 따른 평균 수입 및 표준편차, 개수 구하기\n\n::: {#29f9d4d1 .cell execution_count=2}\n``` {.python .cell-code}\nsex_income = welfare.dropna(subset=\"income\") \\\n            .groupby(\"sex\", as_index=False) \\\n            .agg(mean_income = (\"income\", \"mean\"),\n             std_income = (\"income\", \"std\"),\n             n = (\"sex\", \"count\"))\nsex_income\n```\n\n::: {.cell-output .cell-output-display execution_count=2}\n```{=html}\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>sex</th>\n      <th>mean_income</th>\n      <th>std_income</th>\n      <th>n</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>female</td>\n      <td>186.293096</td>\n      <td>132.057402</td>\n      <td>2245</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>male</td>\n      <td>349.037571</td>\n      <td>217.862254</td>\n      <td>2289</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n```\n:::\n:::\n\n\n## 신뢰구간\n\n::: {#c85e5cc9 .cell execution_count=3}\n``` {.python .cell-code}\na = norm.ppf(0.975, sex_income[\"mean_income\"],\n             sex_income[\"std_income\"] / np.sqrt(sex_income[\"n\"]))\nb = norm.ppf(0.025, sex_income[\"mean_income\"],\n             sex_income[\"std_income\"] / np.sqrt(sex_income[\"n\"]))\npd.DataFrame([a, b])             \n```\n\n::: {.cell-output .cell-output-display execution_count=3}\n```{=html}\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>0</th>\n      <th>1</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>191.755737</td>\n      <td>357.962550</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>180.830455</td>\n      <td>340.112592</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n```\n:::\n:::\n\n\n## 시각화\n\n::: {#fd9bd506 .cell execution_count=4}\n``` {.python .cell-code}\nsns.barplot(data = sex_income, x = \"sex\", y = \"mean_income\",\n            hue = \"sex\")\nplt.plot([0,0], [a[0],b[0]], color=\"red\", linewidth=3)           \nplt.plot([1,1], [a[1],b[1]], color=\"red\", linewidth=3)\nplt.show()\n```\n\n::: {.cell-output .cell-output-display}\n![](index_files/figure-html/cell-5-output-1.png){width=593 height=429}\n:::\n:::\n\n\n",
    "supporting": [
      "index_files"
    ],
    "filters": [],
    "includes": {
      "include-in-header": [
        "<script src=\"https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js\" integrity=\"sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==\" crossorigin=\"anonymous\"></script>\n<script src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js\" integrity=\"sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==\" crossorigin=\"anonymous\" data-relocate-top=\"true\"></script>\n<script type=\"application/javascript\">define('jquery', [],function() {return window.jQuery;})</script>\n"
      ]
    }
  }
}